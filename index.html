<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cleanearth Monitoring Framework</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
  }

  body {
    background: linear-gradient(135deg, rgba(55,94,139,0.9), rgba(147,149,152,0.9), rgba(81,184,72,0.8));
    background-attachment: fixed;
    background-size: cover;
    overflow: hidden;
    color: #fff;
    text-align: center;
  }

  body::before {
    content: "";
    background: url('Cleanearth 16.9 (1).png') center/cover no-repeat;
    opacity: 0.25;
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: -1;
  }

  .hidden { display: none; }
  .container {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 0.6s ease;
  }

  h1 { font-size: 2.5rem; margin-bottom: 1rem; }
  h2 { margin-bottom: 1.5rem; font-weight: normal; }

  button {
    background: #375e8b;
    color: white;
    border: none;
    padding: 12px 24px;
    margin: 8px;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  button:hover {
    transform: scale(1.05);
    background: #51b848;
  }

  .logout-btn {
    background: #2c4370;
  }
  .logout-btn:hover {
    background: #213556;
  }

  input {
    padding: 10px;
    margin: 8px;
    border: none;
    border-radius: 5px;
    width: 250px;
  }

  iframe {
    width: 100%;
    height: 100vh;
    border: none;
  }
</style>
</head>
<body>

<!-- Welcome Screen -->
<div class="container" id="welcomePage">
  <h1>Welcome to Cleanearth Monitoring Framework</h1>
  <button onclick="showPage('rolePage')">Get Started</button>
</div>

<!-- Who's Monitoring -->
<div class="container hidden" id="rolePage">
  <h1>Who's Monitoring?</h1>
  <button onclick="setRole('admin')">Administrator</button>
  <button onclick="setRole('operator')">Operator</button>
</div>

<!-- Login Page -->
<div class="container hidden" id="loginPage">
  <h1>Login</h1>
  <input type="text" id="userId" placeholder="User ID" />
  <input type="password" id="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <button class="logout-btn" onclick="showPage('rolePage')">Back</button>
</div>

<!-- Menu Page -->
<div class="container hidden" id="menuPage">
  <h1 id="roleTitle"></h1>
  <h2>Pick a form to fill</h2>
  <div id="formButtons"></div>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<!-- Embedded Form Page -->
<div class="container hidden" id="formPage">
  <iframe id="formFrame"></iframe>
  <button class="logout-btn" onclick="backToMenu()">Back to Menu</button>
</div>

<script>
  let userRole = "";
  let inactivityTimer;

  const forms = {
    operator: [
      { name: "Daily Monitoring Log", url: "https://forms.office.com/Pages/ResponsePage.aspx?id=RMa6ghCq7UWKc3yHvmV4LNsz3HvfiiRPklPGQ2iIIJ5UNVlRMU5KRzUzRDNMTElYT0ZUUFVHRVJZWC4u&embed=true" },
      { name: "Process Sequence", url: "https://forms.office.com/Pages/ResponsePage.aspx?id=RMa6ghCq7UWKc3yHvmV4LNsz3HvfiiRPklPGQ2iIIJ5UNUJPME9FOFpFU1FXNTJIVjEyWlBGWEtKTC4u&embed=true" },
      { name: "Equipment Maintenance Log", url: "https://forms.office.com/r/svDTTiz80B?embed=true" }
    ],
    admin: [
      { name: "Process Sequence", url: "https://forms.office.com/Pages/ResponsePage.aspx?id=RMa6ghCq7UWKc3yHvmV4LNsz3HvfiiRPklPGQ2iIIJ5URERPOFpHWjlFTU9GWlBORlRPMTA1M1pMVC4u&embed=true" },
      { name: "Effluent Quality", url: "https://forms.office.com/Pages/ResponsePage.aspx?id=RMa6ghCq7UWKc3yHvmV4LNsz3HvfiiRPklPGQ2iIIJ5UQzBEUlI1OEtHNFBEWURZTzZRM1JOTE9MRS4u&embed=true" }
    ]
  };

  function showPage(pageId) {
    document.querySelectorAll('.container').forEach(div => div.classList.add('hidden'));
    document.getElementById(pageId).classList.remove('hidden');
    resetTimer();
  }

  function setRole(role) {
    userRole = role;
    showPage('loginPage');
  }

  function login() {
    const id = document.getElementById('userId').value.trim();
    const pw = document.getElementById('password').value.trim();

    if ((userRole === "operator" && id === "Cleanearth" && pw === "monitor2025") ||
        (userRole === "admin" && id === "Cleanearth" && pw === "GT@2025")) {
      document.getElementById('roleTitle').textContent = userRole === "admin" ? "Administrator Dashboard" : "Operator Dashboard";
      loadMenu();
      showPage('menuPage');
    } else {
      alert("Invalid credentials. Please try again.");
    }
  }

  function loadMenu() {
    const container = document.getElementById('formButtons');
    container.innerHTML = "";
    forms[userRole].forEach(f => {
      const btn = document.createElement('button');
      btn.textContent = f.name;
      btn.onclick = () => loadForm(f.url);
      container.appendChild(btn);
    });
  }

  function loadForm(url) {
    document.getElementById('formFrame').src = url;
    showPage('formPage');
  }

  function backToMenu() {
    showPage('menuPage');
  }

  function logout() {
    document.getElementById('userId').value = "";
    document.getElementById('password').value = "";
    showPage('welcomePage');
  }

  function resetTimer() {
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
      alert("Session timed out. Returning to Welcome page.");
      logout();
    }, 20 * 60 * 1000);
  }

  document.addEventListener("mousemove", resetTimer);
  document.addEventListener("keypress", resetTimer);

  showPage('welcomePage');
</script>
</body>
</html>
